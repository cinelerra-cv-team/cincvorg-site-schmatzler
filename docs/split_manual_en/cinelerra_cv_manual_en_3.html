<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Created on February, 11 2016 by texi2html 1.76 -->
<!--
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people <dev@texi2html.cvshome.org>
Send bugs and suggestions to <users@texi2html.cvshome.org>

-->
<head>
<title>Cinelerra CV Manual: 3. Configuration</title>

<meta name="description" content="Cinelerra CV Manual: 3. Configuration">
<meta name="keywords" content="Cinelerra CV Manual: 3. Configuration">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.76">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_2.html#SEC9" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_4.html#SEC62" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>

<hr size="2">
<a name="Configuration"></a>
<a name="SEC30"></a>
<h1 class="chapter"> 3. Configuration </h1>

<p>Because of its flexibility, Cinelerra cannot be optimized without
special configuration for your specific needs.  Unfortunately, very few parameters are
adjustable at compile time.  Therefore, runtime configuration is the only option for most
users because of the multitude of parameters available.<br>
Below are configuration options as well as the supported API's in GNU/Linux.<br>
In Cinelerra, go to <b>settings-&gt;preferences</b> to see the options.
</p>

<hr size="6">
<a name="Environment-variables"></a>
<a name="SEC31"></a>
<h2 class="section"> 3.1 Environment variables </h2>

<p>In UNIX derivatives, environment variables are global variables in the shell
which all applications can read.  They are set with a command like <code>set
VARIABLE=value</code>.  All the environment variables can be viewed with a command
like <code>env</code>.  Cinelerra recognizes the following environment variables:
</p>
<ul>
<li> <b>LADSPA_PATH</b><br>
If you want to use LADSPA plugins, this must be defined: a colon separated
list of directories to search for LADSPA plugins.  These are not native
Cinelerra plugins.  See section <a href="cinelerra_cv_manual_en_16.html#SEC252">Ladspa effects</a>.

</li><li> <b>GLOBAL_PLUGIN_DIR</b><br>
The directory in which Cinelerra should look for native plugins.  The default is
<tt>`/usr/lib/cinelerra'</tt> but you may need an alternate directory if you share
the same executable directory among many machines via NFS.  Plugins of
different binary formats need to be in different directories.

</li><li> <b>LANG and LANGUAGE</b><br>
Cinelerra can be localized to display menus and messages in many languages.  
Cinelerra language settings are normally read from your GNU/Linux language settings.  
To run Cinelerra on a language different than the one selected on your system 
just change the LANG and LANGUAGE environment variables.<br>
For example, open a shell and type: <code>export LANG=es_ES LANGUAGE=es_ES</code>, then run
<code>cinelerra</code> from the same shell.  It will open set on the Spanish language.<br>
Available languages are:
<ul>
<li> en_EN - English
</li><li> es_ES - Espanol
</li><li> sl_SI - Slovenian
</li><li> fr_FR - Francais
</li><li> eu_ES - Euskera
</li><li> de_DE - German
</li><li> pt_BR - Brazilian Portuguese
</li><li> it_IT - Italian
</li></ul>

<p>If your distribution has only UTF-8 support (like Ubuntu), first you must create
the language charset with this command:<br>
<code>localedef -c -i (language_prefix) -f (your ISO-8859 variant)
(language_prefix).(your ISO-8859 variant)</code><br>
This is an example for Italian language:<br>
<code>localedef -c -i it_IT -f ISO-8859-15 it_IT.ISO-8859-15</code>
</p>
<p>Then you can run cinelerra with this command:<br>
<code>env LANG=$(echo $LANG | sed -e s/UTF-8/(your ISO-8859 variant)/g)
cinelerra</code><br>
This is an example for Italian language:<br>
<code>env LANG=$(echo $LANG | sed -e s/UTF-8/ISO-8859-15/g) cinelerra</code>
</p>
<p>In some cases (e.g. if you compiled Cinelerra specifying a <samp>`--prefix='</samp> option different from <tt>`/usr/local'</tt>) the translated .po files are not installed. If you can't run Cinelerra in your chosen language, try running the following commands before changing the LANG and LANGUAGE environment variables:<br>
<code>cd hvirtual</code><br>
<code>./configure prefix=/usr</code><br>
<code>cd po</code><br>
<code>sudo make install</code><br>
</p></li></ul>

<hr size="6">
<a name="Audio-drivers"></a>
<a name="SEC32"></a>
<h2 class="section"> 3.2 Audio drivers </h2>

<p>The audio drivers are used for both recording and playback.  Their
functionality is described below:
</p>

<hr size="6">
<a name="Sound-driver-attributes"></a>
<a name="SEC33"></a>
<h3 class="subsection"> 3.2.1 Sound driver attributes </h3>

<ul>
<li> <b>Device path</b> <br>
Usually a file in the <tt>`/dev/'</tt> directory which controls the device.

</li><li> <b>Bits</b><br>
The number of bits of precision Cinelerra should set the device for.  This
sometimes has a figurative meaning.  Some sound drivers need to be set to 32
bits to perform 24 bit playback and will not play anything when set to 24 bits.
Some sound drivers need to be set to 24 bits for 24 bit playback.

</li><li> <b>Port</b><br>
The IEEE1394 standard specifies something known as the <b>port</b>.  This is
probably the firewire card number.

</li><li> <b>Channel</b><br>
The IEEE1394 standard specifies something known as the channel. For DV cameras
it is always 63. 

</li><li> <b>Device</b><br>
The chosen device.

</li><li> <b>Stop playback locks up</b><br>
This ALSA only checkbox is needed if stopping playback causes the software to lock up.
</li></ul>

<hr size="6">
<a name="OSS"></a>
<a name="SEC34"></a>
<h3 class="subsection"> 3.2.2 OSS </h3>

<p>This was the first GNU/Linux sound driver.  It had an open source
implementation and a commercial implementation with more sound cards supported.
It was the standard sound driver up to GNU/Linux 2.4.  It still is the only
sound driver which an i386 binary can use when running on an x86_64 system.
</p>
<hr size="6">
<a name="OSS-Envy24"></a>
<a name="SEC35"></a>
<h3 class="subsection"> 3.2.3 OSS Envy24 </h3>

<p>The commercial version of OSS had a variant for 24 bit 96 KHz soundcards.  This
variant required significant changes to the way the sound drivers were used,
hence the need for the new driver.
</p>
<hr size="6">
<a name="Alsa"></a>
<a name="SEC36"></a>
<h3 class="subsection"> 3.2.4 Alsa </h3>

<p>ALSA is the most common sound driver in GNU/Linux 2.6.  It supports most
of soundcards now.  It takes advantage of low latency features in GNU/Linux 2.6
to get better performance than OSS had in 2.4, but roughly the same performance
that OSS had in 2.0.  Unfortunately ALSA is constantly changing.  A program
which works with it one day may not the next day.  New wrappers are being
developed on top of ALSA.  We plan to support them at regular
intervals, though not at every new release of a new wrapper.<br>
ALSA is no longer portable between i386 and x86_64.  If an i386 binary tries to
play back on an x86_64 kernel, it will crash.  For this scenario, use OSS.
</p>
<hr size="6">
<a name="Esound"></a>
<a name="SEC37"></a>
<h3 class="subsection"> 3.2.5 Esound </h3>

<p>ESOUND was a sound server that sat on top of OSS.  It was written for a window
manager called Enlightenment.  It supports a limited number of bits and has
high latency compared to more modern drivers, but it does have the ability to 
multiplex multiple audio sources. It is unknown whether it still works.
</p>
<hr size="6">
<a name="Raw-1394"></a>
<a name="SEC38"></a>
<h3 class="subsection"> 3.2.6 Raw 1394 </h3>

<p>The was the first interface between GNU/Linux software and firewire camcorders.
It is the least reliable way to play audio to a camcorder and consists of
a library on top of the kernel commands.
</p>
<hr size="6">
<a name="DV-1394"></a>
<a name="SEC39"></a>
<h3 class="subsection"> 3.2.7 DV 1394 </h3>

<p>This is the second rewrite of DV camcorder support in GNU/Linux.  This is the most
reliable way to play audio to a camcorder and consists of direct kernel
commands.
</p>
<hr size="6">
<a name="IEC-61883"></a>
<a name="SEC40"></a>
<h3 class="subsection"> 3.2.8 IEC 61883 </h3>

<p>The third rewrite of DV camcorder support in GNU/Linux.  This is a library on
top of RAW 1394 which is a library on top of the kernel commands.  It is less
reliable than DV 1394 but more reliable than RAW 1394.  The next rewrite ought
to fix that.  Visit <a href="http://www.linux1394.org">http://www.linux1394.org</a> for more information and
the latest drivers.
</p>
<hr size="6">
<a name="Video-drivers"></a>
<a name="SEC41"></a>
<h2 class="section"> 3.3 Video drivers </h2>

<p>The video drivers are used for video playback in the compositor and the viewer.
</p>

<hr size="6">
<a name="Video-driver-attributes"></a>
<a name="SEC42"></a>
<h3 class="subsection"> 3.3.1 Video driver attributes </h3>

<ul>
<li> <b>Display</b><br>
<a name="IDX8"></a>
The interface is intended for dual monitor displays.  Depending on the value of
Display, the Compositor window will appear on a different monitor from the rest
of the windows.

</li><li> <b>Device path</b><br>
Usually a file in the <tt>`/dev/'</tt> directory which controls the device.

</li><li> <b>Swap fields</b><br>
Make the even lines odd and the odd lines even when sending to the device.  On
an NTSC or 1080i monitor the fields may need to be swapped to prevent jittery
motion.

</li><li> <b>Output channel</b><br>
You may need a specific connector to send video out to devices with multiple outputs.

</li><li> <b>Port</b><br>
The IEEE1394 standard specifies something known as the <b>port</b>.  This is
probably the firewire card number.

</li><li> <b>Channel</b><br>
The IEEE1394 standard specifies something known as the <b>channel</b>.  For DV
cameras it is always <b>63</b>.
</li></ul>

<hr size="6">
<a name="X11"></a>
<a name="SEC43"></a>
<h3 class="subsection"> 3.3.2 X11 </h3>

<p>This was the first method of graphical display on any UNIX system.
It just writes the RGB triplet for each pixel directly to the
window.  It is the slowest playback method.  It is still useful as a fallback
when graphics hardware can not handle very large frames.
</p>
<hr size="6">
<a name="X11_002dXV"></a>
<a name="SEC44"></a>
<h3 class="subsection"> 3.3.3 X11-XV </h3>

<p>This was an enhancement to X11 in 1999.  It
converts YUV to RGB in hardware with scaling.  It is the preferred playback
method but can not handle large frame sizes.  The maximum video size for XV is
usually 1920x1080.
</p>
<hr size="6">
<a name="X11_002dOpenGL"></a>
<a name="SEC45"></a>
<h3 class="subsection"> 3.3.4 X11-OpenGL </h3>

<p>The most powerful video playback method is OpenGL.  With this driver, most
effects are done in hardware.  OpenGL allows video sizes up to the maximum
texture size, which is usually larger than what XV supports, depending on the
graphics driver.  To enable it you will need a binary built with OpenGL
support.  The <code>configure</code> option to enable OpenGL is
<samp>`--enable-opengl'</samp>.  You need a video card which supports OpenGL 2.0.
Recent Nvidia video cards should work.  You also need to use a video driver
supporting OpenGL 2.0, such as Nvidia's binary driver.  To know if your video
driver supports OpenGL 2.0, type the following command: <code>glxinfo | grep
&quot;OpenGL version&quot;</code>
</p>
<ul>
<li> Video driver supporting hardware OpenGL 2.0 rendering:<br>
<code>OpenGL version string: 2.0.2 NVIDIA 87.74</code>
</li><li> Video driver not supporting hardware OpenGL 2.0 rendering:<br>
<code>OpenGL version string: <b>1.4</b> (2.0.2 NVIDIA 87.74)</code>
</li></ul>

<p>OpenGL relies on PBuffers and shaders to do video rendering.  The graphics
driver must support OpenGL 2.0 and Cinelerra needs to be explicitly compiled with
OpenGL 2.0 support.  This requires compiling it on a system with the OpenGL 2.0
headers.  PBuffers are known to be fickle.  If the graphics card does not have
enough memory or does not have the right visuals, PBuffers will not work.  If
OpenGL does not work, try seeking several frames or restarting Cinelerra.
</p>
<p><b>Limitations:</b>
</p><ul>
<li> OpenGL does not affect rendering.  It just accelerates playback.
</li><li> X11-OpenGL processes everything in 8 bit color models, although the
difference between YUV and RGB is retained.
</li><li> OpenGL does not work with frames whose size is larger than 4096x4096.<br>
Here is what is written in the console when working with large frames:<br>
<code>BC_Texture::create_texture frame size &lt;frame_width&gt;x&lt;frame_height&gt; bigger
than maximum texture 4096x4096.</code>
</li><li> The scaling equation set in the preferences window is ignored by OpenGL.
OpenGL always uses linear scaling.
</li><li> Project and track sizes need to be multiples of four for OpenGL to work.
</li><li> To get the most acceleration, OpenGL-enabled effects must be placed after
software-only effects.  All rendering before the last software-only effect is
done in software.  The core Cinelerra operations like camera and projector are
OpenGL.
</li><li> Not all of the effects support OpenGL acceleration.  The following effects
support OpenGL: Brightness, Chromakey, Chromakeyhsv, Color balance,
Deinterlace, Diffkey, Dissolve, Flip, Frames to fields, Freeze frame, Gamma,
Gradient, Histogram, Hue saturation, Interpolate Pixels, Invert video, Linear
blur, Overlay, Perspective, Radial blur, RGB601, Rotate, Scale, Threshold,
Zoomblur.
</li></ul>

<hr size="6">
<a name="Buz"></a>
<a name="SEC46"></a>
<h3 class="subsection"> 3.3.5 Buz </h3>

<p>This is a method for playing motion JPEG-A files directly to a composite analog
signal.  It uses a popular hack of the Video4Linux 1 driver from 2000 to
decompress JPEG in hardware.  Even though analog output is largely
obsolete, newer drivers have replaced BUZ.
</p>
<hr size="6">
<a name="Raw-1394-video-playback"></a>
<a name="SEC47"></a>
<h3 class="subsection"> 3.3.6 Raw 1394 video playback </h3>

<p>This was the first interface between GNU/Linux software and firewire
camcorders.  It is the least reliable way to play video to a camcorder and it
consists of a library on top of the kernel commands.
</p>
<hr size="6">
<a name="DV-1394-video-playback"></a>
<a name="SEC48"></a>
<h3 class="subsection"> 3.3.7 DV 1394 video playback </h3>

<p>The second rewrite of DV camcorder support in GNU/Linux.  This was the most
reliable way to play video to a camcorder and consists of direct kernel
commands.
</p>
<hr size="6">
<a name="IEC-61883-video-playback"></a>
<a name="SEC49"></a>
<h3 class="subsection"> 3.3.8 IEC 61883 video playback </h3>

<p>The third rewrite of DV camcorder support in GNU/Linux.  This is a library on
top of RAW 1394 and is less
reliable than DV 1394 but more reliable than RAW 1394.  The next rewrite ought
to fix that.  Visit <a href="http://www.linux1394.org">http://www.linux1394.org</a> for more information and
the latest drivers.
</p>
<hr size="6">
<a name="Playback"></a>
<a name="SEC50"></a>
<h2 class="section"> 3.4 Playback </h2>


<hr size="6">
<a name="Audio-out"></a>
<a name="SEC51"></a>
<h3 class="subsection"> 3.4.1 Audio out </h3>

<p>These determine what happens when you play sound from the timeline.
</p>
<a name="IDX9"></a>
<a name="IDX10"></a>
<ul>
<li> <b>Playback buffer size</b><br>
For playing audio, small fragments of sound are read from disk and processed 
sequentially in a virtual console.  A larger value here causes more latency when
you change mixing parameters but yields more reliable playback.<br>
Some sound drivers do not allow changing of the console fragment, so latency is
unchanged no matter what the value.<br>
Previously, a good way of ensuring high quality playback was to read bigger 
fragments from the disk and break them into smaller fragments for the soundcard. 
That changed when the virtual console moved from the push model to the pull model. 
Since different stages of the rendering pipeline can change the rate of the incoming
data, it would be difficult to disconnect the size of the console fragments
from the size of the fragments read from disk.

<a name="IDX11"></a>
<a name="IDX12"></a>
</li><li> <b>Audio offset</b><br>
The ability to tell the exact playback position on GNU/Linux sound drivers is
poor, if it is provided at all.  Since this information is required for
proper video synchronization, it has to be accurate.  The <b>audio offset</b>
allows users to adjust the position returned by the sound driver in order to reflect
reality.  The audio offset does not affect the audio playback or rendering at
all.  It merely changes the synchronization of video playback.<br>
The easiest way to set the audio offset is to create a timeline with one video
track and one audio track.  Expand the audio track and center the audio pan.
The frame rate should be larger than 24 fps and the sampling rate should be
greater than 32000.  The frame size should be small enough for your computer to render
it at the full frame rate.  Highlight a region of the timeline starting at 10
seconds and ending at 20 seconds.  Drop a <b>gradient</b> effect on the video
track and configure it to be clearly visible.  Drop a <b>synthesizer</b> effect on
the audio and configure it to be clearly audible.<br>
Play the timeline from 0 and watch to see if the gradient effect starts exactly
when the audio starts.  If it does not, expand the audio track and adjust the
nudge.  If the audio starts ahead of the video, decrease the nudge value.  If
the audio starts after the video, increase the nudge value.  Once the tracks
play back synchronized, copy the nudge value to the <b>audio offset</b> value in
preferences.<br>
<b>Note:</b> if you change sound drivers or you change the value of <b>Use
software for positioning information</b>, you will need to change the audio offset
because different sound drivers are unequally inaccurate.

<a name="IDX13"></a>
<a name="IDX14"></a>
</li><li> <b>View follows playback</b><br>
This causes the timeline window to scroll when the playback cursor moves.  This
can bog down the X Server or cause the timeline window to lock up for long
periods of time while drawing the assets.

<a name="IDX15"></a>
<a name="IDX16"></a>
</li><li> <b>Use software for positioning information</b><br>
Most soundcards and sound drivers do not give reliable information on the number
of samples the card has played.  You need this information
for synchronization when playing back video.  This option causes the sound driver 
to be ignored and a software timer to be used for synchronization.

<a name="IDX17"></a>
<a name="IDX18"></a>
</li><li> <b>Audio playback in realtime</b><br>
Back in the days when 150 MHz was the maximum speed for a personal computer, this 
setting allowed uninterrupted playback during periods of heavy load.  It forces 
the audio playback to the highest priority in the kernel.  Today, it is most 
useful for achieving very low latency between console tweaks and soundcard output.
You must be root to get real-time priority.

<a name="IDX19"></a>
</li><li> <b>Audio driver</b><br>
There are many sound drivers for GNU/Linux.  This allows selecting one sound
driver and setting parameters specific to it.  The sound drivers and their
parameters are described in the sound driver section.  See section <a href="#SEC32">Audio drivers</a>.
</li></ul>

<hr size="6">
<a name="Video-out"></a>
<a name="SEC52"></a>
<h3 class="subsection"> 3.4.2 Video out </h3>

<p>These determine how video gets from the timeline to your eyes.
</p>
<a name="IDX20"></a>
<a name="IDX21"></a>
<ul>
<li> <b>Play every frame</b><br>
This causes every frame of video to be displayed even if it means that the playback 
of the video track(s) will fall behind.  This option should always be enabled 
unless you use uncompressed codecs.  As of 1/2007, most compressed codecs do not 
support frame dropping anymore.

<a name="IDX22"></a>
</li><li> <b>Framerate achieved</b><br>
The number of frames per second being displayed during playback.  This is
updated during playback only.

<a name="IDX23"></a>
</li><li> <b>Decode frames asynchronously</b><br>
If you have lots of memory and more than one CPU, this option can improve
playback performance by decoding video on one CPU as fast as possible while
dedicating the other CPU to playing back video.  It assumes all playback
operations are forward and no frames are dropped.  Operations involving reverse
playback or frame dropping are negatively impacted.<br>
Since this option requires enormous amounts of memory, Cinelerra may crash if the
input frames are very large.

<a name="IDX24"></a>
<a name="IDX25"></a>
</li><li> <b>Scaling equation</b><br>
This algorithm is used when video playback involves any kind of scaling or
translation in the virtual console.  This does not affect 1:1 playback.
<ul>
<li> <b>Nearest neighbor enlarge and reduce</b><br>
Low quality output with fast playback.  Produces jagged edges and uneven motion.
</li><li> <b>Bicubic enlarge and bilinear reduce</b><br>
High quality output with slow playback.  Bicubic interpolation is used for enlarging,
which blurs slightly but does not show stair step artifacts.  A bilinear
interpolation is used for reduction, which produces very sharp images and reduces noise.
Bilinearly reduced images can be sharpened with a sharpen effect with less noise
side effects than a normal sized image.
</li><li> <b>Bilinear enlarge and bilinear reduce</b><br>
When slight enlargement is needed, a bilinear enlargement looks better than a
bicubic enlargement.
</li></ul>

<a name="IDX26"></a>
<a name="IDX27"></a>
</li><li> <b>Preload buffer for Quicktime</b><br>
The Quicktime/AVI decoder can handle DVD sources better when this is set to around
10000000.  This reduces the amount of seeking required.  When
reading high bitrate sources from a hard drive, this tends to impair performance 
by slowing down decoding. For normal use this should be 0.

<a name="IDX28"></a>
<a name="IDX29"></a>
</li><li> <b>DVD subtitle to display</b><br>
DVD IFO files usually contain subtitle tracks.  These must be decoded with
the MPEG decoder.  Select <b>Enable subtitles</b> to enable subtitle decoding.
There are usually multiple subtitle tracks indexed by number and starting from
0.  Enter the index number of the subtitle track to be decoded in the &quot;DVD
Subtitle to display&quot; text box or use the tumbler to increase the index value.
Go to the asset corresponding to the MPEG file in the Resources window and
right click.  Click on Info.  The number of subtitle tracks is shown at the
bottom.

<a name="IDX30"></a>
<a name="IDX31"></a>
</li><li> <b>Interpolate CR2 images</b><br>
Enables interpolation of CR2 images.  Interpolation is required since the raw 
image in a CR2 file is a Bayer pattern.  The interpolation uses dcraw's built-in
interpolation and is very slow.  This operation can be disabled and the
<b>Interpolate Pixels</b> effect used instead for faster previewing.

<a name="IDX32"></a>
</li><li> <b>White balance CR2 images</b><br>
This enables white balancing for CR2 images if interpolation is also enabled.
This is because proper white balancing needs a blending of all 3 primary colors.
White balance uses the camera's matrix which is contained in the CR2 file.<br>
Disabling white balancing is useful for operations involving dark frame
subtraction.  The dark frame and the long exposure need to have the same color
matrix.<br>
If you disable <b>Interpolate CR2 Images</b> and use the <b>Interpolate Pixels</b>
effect, be aware the <b>Interpolate Pixels</b> effect always does both
interpolation and white balancing using the camera's matrix, regardless of the
settings in Preferences.  Dark frame subtraction needs to be performed before
<b>Interpolate Pixels</b>.

<a name="IDX33"></a>
</li><li> <b>Video driver</b><br>
Normally video on the timeline goes to the compositor window during both continuous
playback and when the insertion point is repositioned.  Instead of sending
video to the Compositor window, the video driver can be set to send video to
another output device during continuous playback.  However, this does not affect 
where video is routed when the insertion point is repositioned.<br>
The video drivers and their parameters are described in the video drivers
section.  See section <a href="#SEC41">Video drivers</a>.
</li></ul>

<hr size="6">
<a name="Recording"></a>
<a name="SEC53"></a>
<h2 class="section"> 3.5 Recording </h2>

<p>The parameters here expedite the <b>File-&gt;Record...</b> function by allowing the
user to pre-configure the file format.  The file format is applied to all
recordings.  Also set here is the hardware for recording, since the hardware
determines the supported file format (in most cases).
</p>

<hr size="6">
<a name="File-format"></a>
<a name="SEC54"></a>
<h3 class="subsection"> 3.5.1 File format </h3>

<p>This determines the output file format for recordings.  It depends heavily on
the type of driver used.  The menu selections are the same as the rendering 
interface.  See See section <a href="cinelerra_cv_manual_en_20.html#SEC269">Rendering files</a>.
The <b>Record audio tracks</b> toggle must be enabled to record audio.  The
<b>Record video tracks</b> toggle must be enabled to record video.  The wrench
button left of each toggle opens a configuration dialog in order to set the 
compression scheme (codec) for each audio and video output stream.  The audio 
and video is wrapped in a container format defined by the <b>File Format</b> menu. 
Different wrappers may record audio only, video only, or both.
</p>
<p>Some video drivers can only record to a certain container.  DV, for example, can
only record to Quicktime with DV as the video compression scheme.  If the video driver
is changed, the file format may be updated to give the supported output.  If
you change the file format to an unsupported format, it may not work with the
video driver.
</p>
<hr size="6">
<a name="Audio-in"></a>
<a name="SEC55"></a>
<h3 class="subsection"> 3.5.2 Audio in </h3>

<p>These determine what happens when you record audio.
</p>
<a name="IDX34"></a>
<a name="IDX35"></a>
<a name="IDX36"></a>
<a name="IDX37"></a>
<ul>
<li> <b>Record driver</b><br>
This is used for recording audio in the Record window.  It may be configured the same as
the Record Driver for video if the audio and video are wrapped in the same
stream.  Available parameters vary depending on the driver.  Note that the drivers
are the same as those available in Preferences-&gt;Playback. See section <a href="#SEC32">Audio drivers</a>.

<a name="IDX38"></a>
</li><li> <b>Samples to write to disk at a time</b><br>
First, audio is read in small fragments from the device.  Then, many small fragments
are combined into a large fragment before writing to disk.  The disk writing
process is done in a different thread.  The value here determines how large the
combination of fragments is for each disk write.

<a name="IDX39"></a>
<a name="IDX40"></a>
</li><li> <b>Sample rate for recording</b><br>
Regardless of what the project settings are, the value set here will be the sample rate used for
recording.  The sample rate should be set to the highest value the audio device supports.
</li></ul>

<hr size="6">
<a name="Video-in"></a>
<a name="SEC56"></a>
<h3 class="subsection"> 3.5.3 Video in </h3>

<p>These determine what happens when you record video.
</p>
<a name="IDX41"></a>
<a name="IDX42"></a>
<ul>
<li> <b>Record driver</b><br>
This is used for recording video in the Record window.  It may be configured the same as
the Record Driver for video if the audio and video are wrapped in the same
container.  Available parameters vary depending on the driver.  Note that the drivers available
are the as those available in Preferences-&gt;Playback.  See section <a href="#SEC41">Video drivers</a>.

<a name="IDX43"></a>
</li><li> <b>Frames to record to disk at a time</b><br>
Frames are recorded in a pipeline.  First, frames are buffered in the device.
Then, they are read into a larger buffer for writing to disk.  The disk writing
is done in a separate thread from the device reading.  For certain codecs the
disk writing uses multiple processors.  The value set here determines how many frames
are written to disk at a time.

<a name="IDX44"></a>
</li><li> <b>Frames to buffer in device</b><br>
This is the number of frames to store in the device before reading and determines
how much latency there can be in the system before frames are dropped.

<a name="IDX45"></a>
</li><li> <b>Use software for positioning information</b><br>
Video uses audio for synchronization, but most soundcards do not give accurate
position information.  Selecting this options makes Cinelerra calculate an 
estimation of audio position in software instead of hardware for synchronization.

<a name="IDX46"></a>
</li><li> <b>Sync drives automatically</b><br>
For high bitrate recording, the disk drives you use may be fast enough to store the data but
your operating system may wait several minutes and stall as it writes several minutes of
data at a time.  This forces the operating system to flush its buffers every second
instead of every few minutes to produce slightly better real-time behavior.

<a name="IDX47"></a>
<a name="IDX48"></a>
</li><li> <b>Size of captured frame</b><br>
This is the size of the recorded frames in pixels.  It is independent of the project
frame size because most video devices only record a fixed frame size.  If the
frame size given here is not supported by the device, Cinelerra may crash.

<a name="IDX49"></a>
<a name="IDX50"></a>
</li><li> <b>Frame rate for recording</b><br>
The frame rate recorded is different from the project settings.  This sets the
recorded frame rate.
</li></ul>

<hr size="6">
<a name="Performance"></a>
<a name="SEC57"></a>
<h2 class="section"> 3.6 Performance </h2>

<p>You will spend most of your time configuring this section.  The main focus of
the performance section is rendering parameters not available in the rendering dialog.
</p>
<a name="IDX51"></a>
<ul>
<li> <b>Cache items</b><br>
To speed up rendering, several assets are kept open simultaneously. This
determines how many are kept open. A number too large may exhaust your memory
pretty fast and result in a crash. A number too small may result in slow
playback as assets need to be reopened more frequently.

<a name="IDX52"></a>
</li><li> <b>Seconds to preroll renders</b><br>
Some effects need a certain amount of time to settle in.  Checking this option 
sets a number of seconds to render without writing to disk before the selected 
region is rendered.  When using the renderfarm, you will sometimes need to 
preroll to get seemless transitions between the jobs.  Every job in a renderfarm 
is prerolled by this value.  This does not affect background rendering, however. 
Background rendering uses a different preroll value.

<a name="IDX53"></a>
<a name="IDX54"></a>
</li><li> <b>Force single processor use</b><br>
Cinelerra tries to use all processors on the system by default, but sometimes
you will only want to use one processor, like in a renderfarm client.  This
forces only one processor to be used.  In addition, the operating system usually
uses the second processor for disk access.  So this option is really a
1.25 processor mode.  The value of this parameter is used in renderfarm
clients.
</li></ul>


<hr size="6">
<a name="Background-rendering"></a>
<a name="SEC58"></a>
<h3 class="subsection"> 3.6.1 Background rendering </h3>

<p>Background rendering was originally conceived to allow HDTV effects to be
displayed in real-time.  Background rendering causes temporary output to
be rendered constantly while the timeline is being modified.  The temporary
output is displayed during playback whenever possible.  This is useful for
transitions and previewing effects that are too slow to display in
real time.  If a renderfarm is enabled, the renderfarm is used
for background rendering.  This gives you the potential for real-time effects if
enough network bandwidth and CPU nodes exist.
</p>
<p>Background rendering is enabled in the <b>Performance</b> tab of the
<b>Preferences</b> window.  It has one interactive function <b>Settings menu -&gt;
Set background render</b>.  This sets the point where background rendering starts
up to the position of the insertion point.  If any video exists, a red bar appears 
in the time ruler showing what has been background rendered.
</p>
<p>It is often useful to insert an effect or a transition and then select
<b>Settings menu -&gt; Set background render</b> right before the effect to preview
it in real time and full frame rates.
</p>
<a name="IDX55"></a>
<ul>
<li> <b>Frames per background rendering job</b><br>
This only works if a renderfarm is being used; otherwise, background rendering
creates a single job for the entire timeline.  The number of frames specified
here is scaled to the relative CPU speed of rendering nodes and used in a
single renderfarm job.  The optimum number is 10 - 30 since network bandwidth
is used to initialize each job.

<a name="IDX56"></a>
</li><li> <b>Frames to preroll background</b><br>
This is the number of frames to render ahead of each background rendering job.
Background rendering is degraded when preroll is used since the jobs are small.
When using background rendering, this number is ideally 0.  Some effects may
require 3 frames of preroll.

<a name="IDX57"></a>
</li><li> <b>Output for background rendering</b><br>
Background rendering generates a sequence of image files in a certain
directory.  This parameter determines the filename prefix of the image files.
It should be on a fast disk, accessible to every node in the renderfarm by the
same path.  Since hundreds of thousands of image files are usually created,
<code>ls</code> commands will not work in the background rendering directory.  The
<img src=".././manual_images_intl/magnify.png" alt="manual_images_intl/magnify"> browse button for this option normally will not
work either, but the <img src=".././manual_images_intl/wrench.png" alt="manual_images_intl/wrench"> configuration button for
this option works.

<a name="IDX58"></a>
</li><li> <b>File format</b><br>
The file format for background rendering has to be a sequence of images.  The
format of the image sequences determines the quality and speed of playback.
JPEG is good most of the time.
</li></ul>

<hr size="6">
<a name="Renderfarm"></a>
<a name="SEC59"></a>
<h3 class="subsection"> 3.6.2 Renderfarm </h3>

<p>To use the renderfarm, set these options.  Ignore them for a standalone system
</p>
<a name="IDX59"></a>
<ul>
<li> <b>Use render farm for rendering</b><br>
When selected, all the <b>file-&gt;render</b> operations use the renderfarm.

<a name="IDX60"></a>
</li><li> <b>Nodes</b><br>
Displays all the nodes on the renderfarm and shows which ones are active.  Nodes are
added by entering the host name of the node, verifying the value of <b>port</b>
and selecting <b>add node</b>.  If you have hundreds of nodes, experienced
users may be better off editing the
<tt>`~/.bcast/.Cinelerra_rc'</tt> file rather than using configuration dialog.
Remember that <tt>`.Cinelerra_rc'</tt> is overwritten whenever a copy of Cinelerra
exits.<br>
Once nodes are created, select the <b>ON</b> column to activate and deactivate nodes.
Nodes may be edited by highlighting a row and hitting <b>apply
changes</b>.

<a name="IDX61"></a>
</li><li> <b>Hostname</b><br>
Edit the hostname of an existing node or enter the hostname of a new node here.

<a name="IDX62"></a>
</li><li> <b>Port</b><br>
Edit the port number of an existing node or enter the port number of a new node here.

<a name="IDX63"></a>
</li><li> <b>Apply changes</b><br>
When editing an existing node, select this to commit the changes to <b>hostname</b>
and <b>port</b>.  The changes will not be committed if you do not click this button.

<a name="IDX64"></a>
</li><li> <b>Add node</b><br>
Create a new node with the <b>hostname</b> and <b>port</b> settings.

<a name="IDX65"></a>
</li><li> <b>Delete node</b><br>
Deletes whatever node is highlighted in the <b>nodes</b> list.

<a name="IDX66"></a>
<a name="IDX67"></a>
</li><li> <b>Sort nodes</b><br>
Sorts the <b>nodes</b> list based on the hostname.

<a name="IDX68"></a>
</li><li> <b>Reset rates</b><br>
This sets the framerate for all the nodes to 0.  Frame rates are used to scale
job sizes based on CPU speed of the node.  Frame rates are calculated only when
renderfarm is enabled.

<a name="IDX69"></a>
<a name="IDX70"></a>
</li><li> <b>Total jobs to create</b><br>
Determines the number of jobs to dispatch to the renderfarm.  The more jobs you
create, the more finely balanced the renderfarm becomes.<br>
You can determine the total jobs to create by multiplying the number of nodes
including the master node by some number.  Multiply them by 1 to have one job
dispatched for every node.  Multiply them by 3 to have 3 jobs dispatched for
every node.  If you have 10 slave nodes and one master node, specify 33 to have
a well balanced renderfarm.
</li></ul>

<hr size="6">
<a name="Interface"></a>
<a name="SEC60"></a>
<h2 class="section"> 3.7 Interface </h2>

<p>These parameters affect purely how the user interface works.
</p>
<a name="IDX71"></a>
<ul>
<li> <b>Time format</b><br>
Various representations of time are given.  Select the most convenient one.
The time representation can also be changed by <kbd>CTRL</kbd> clicking on the
timebar.

<a name="IDX72"></a>
<a name="IDX73"></a>

</li><li> <b>Index files go here</b><br>
Back in the days when 4 MB/sec was extremely fast for a hard drive, index
files were introduced to speed up drawing the audio tracks.  This option
determines where index files are placed on the hard drive.

<a name="IDX74"></a>
</li><li> <b>Size of index file</b><br>
This determines the size of an index file.  Larger index sizes allow smaller files
to be drawn faster, while slowing down the drawing of large files.  Smaller
index sizes allow large files to be drawn faster, while slowing down small
files.

<a name="IDX75"></a>
</li><li> <b>Number of index files to keep</b><br>
To keep the index directory from becoming unruly, old index files are deleted.
This determines the maximum number of index files to keep in the directory.

<a name="IDX76"></a>
</li><li> <b>Delete existing indexes</b><br>
When you change the index size or you want to clean out excess index files,
this deletes all the index files.

<a name="IDX77"></a>
</li><li> <b>Use thumbnails</b><br>
The Resource Window displays thumbnails of assets by default.  Drawing asset 
thumbnails can take a while.  This option disables thumbnail drawing.

<a name="IDX78"></a>
</li><li> <b>Dragging edit boundaries does what</b><br>
Cinelerra not only allows you to perform editing by dragging edit boundaries, 
but also defines three separate operations that occur when you drag an edit boundary.  
Here you can select the behavior of each mouse button.  The usage of
each editing mode is described in the editing chapter.  See section <a href="cinelerra_cv_manual_en_7.html#SEC116">Trimming</a>.

<a name="IDX79"></a>
</li><li> <b>Min dB for meter</b><br>
Some sound sources have a lower noise threshold than others.  Everything below
the noise threshold is meaningless.  This option sets the meters to clip below
a certain level.  Consumer soundcards usually bottom out at -65.  Professional
soundcards bottom out at -90.  See section <a href="cinelerra_cv_manual_en_11.html#SEC145">Sound level meters window</a>.

<a name="IDX80"></a>
</li><li> <b>Max dB for meter</b><br>
This sets the maximum sound level represented by the sound meters.  No matter
what this value is, no soundcard can play sound over 0 dB.  This value is
presented merely to show how far over the limit a sound wave is.  See section <a href="cinelerra_cv_manual_en_11.html#SEC145">Sound level meters window</a>.

<a name="IDX81"></a>
</li><li> <b>Theme</b><br>
Cinelerra supports variable themes.  Select one here and restart Cinelerra to
see it.
</li></ul>

<hr size="6">
<a name="About"></a>
<a name="SEC61"></a>
<h2 class="section"> 3.8 About window </h2>

<p>This section gives you information about the copyright, the time of the current
build, the lack of a warranty, and the versions of some of the libraries.  Be
sure to agree to the terms of the lack of the warranty.
</p>
<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#SEC30" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_4.html#SEC62" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en.html#SEC_Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>February, 11 2016</i> using <a href="http://texi2html.cvshome.org/"><i>texi2html 1.76</i></a>.
 </font>
 <br>

</p>
</body>
</html>
