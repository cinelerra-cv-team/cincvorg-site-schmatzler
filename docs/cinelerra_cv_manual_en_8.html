<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created on May 12, 2015 by texi2html 5.0
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Cinelerra CV Manual: 8 Compositor window</title>

<meta name="description" content="Cinelerra CV Manual: 8 Compositor window">
<meta name="keywords" content="Cinelerra CV Manual: 8 Compositor window">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 5.0">
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nocodebreak {white-space:pre}
span.nolinebreak {white-space:pre}
span.roman {font-family:serif; font-weight:normal}
span.sansserif {font-family:sans-serif; font-weight:normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_7.html#Editing" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_9.html#Viewer-window" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>

<hr>
<a name="Compositor-window"></a>
<a name="Compositor-window-1"></a>
<h1 class="chapter">8 Compositor window</h1>
<a name="index-Compositor-window"></a>

<p>This window displays the output of the timeline.  It is the interface for most
compositing operations or operations that affect the appearance of the timeline
output.  Operations done in the Compositor affect the timeline but do not affect
clips.
</p>

<hr>
<a name="Compositor-controls"></a>
<a name="Compositor-controls-1"></a>
<h2 class="section">8.1 Compositor controls</h2>
<a name="index-Compositor-controls"></a>

<p>The video output has several navigation functions.  The video output size is
either locked to the window size or unlocked with scrollbars for navigation.
The video output can be zoomed in and out and panned.  Navigating the video
output this way does not affect the rendered output; it just changes the point
of view in the compositor window.
</p>
<p>If it is unlocked from the window size, middle clicking and dragging anywhere
in the video pans the point of view.
</p>
<p>Hitting the <kbd>+</kbd> and <kbd>-</kbd> keys zooms in and out of the video output.
</p>
<p>Underneath the video output are copies of many of the functions available in
the main window.  In addition there is a <img src="manual_images_intl/cwindow_zoom.png" alt="manual_images_intl/cwindow_zoom">
zoom menu and a <img src="manual_images_intl/cwindow_light.png" alt="manual_images_intl/cwindow_light"> tally light.
</p>
<p>The zoom menu jumps to all the possible zoom settings and, through the <b>Auto</b>
option, locks the video to the window size.  The zoom menu does not affect the
window size.
</p>
<p>The tally light turns red when rendering is happening.  This is useful for
knowing if the output is current.
</p>
<p>Right clicking anywhere in the video output brings up a menu with all the zoom
levels and some other options.  In this particular case the zoom levels resize
the entire window and not just the video.
</p>
<p>The <b>reset camera</b> and <b>reset projector</b> options center the camera and
projector See section <a href="#Compositing">Compositing</a>.
</p>
<a name="index-Hide-controls"></a>
<a name="index-Controls_002c-hide"></a>
<p>The <b>Hide controls</b> option hides everything except the video.
</p>
<p>On the left of the video output is a toolbar specific to the compositor window.
Here are the functions in the toolbar:
</p>

<hr>
<a name="Protect-video"></a>
<a name="Protect-video-1"></a>
<h3 class="subsection">8.1.1 Protect video</h3>
<a name="index-Protect-video"></a>
<a name="index-Video_002c-protect"></a>

<p>This disables changes to the compositor output from clicks in it.  It is an
extra layer on top of the track arming toggle to prevent unwanted changes.
</p>
<hr>
<a name="Magnifying-glass"></a>
<a name="Magnifying-glass-1"></a>
<h3 class="subsection">8.1.2 Magnifying glass</h3>
<a name="index-Magnifying-glass"></a>

<p>This tool <img src="manual_images_intl/magnify.png" alt="manual_images_intl/magnify"> zooms in and out of the compositor
output without resizing the window.  If the video output is currently locked to
the size of the window, clicking in it with the magnifying glass unlocks it and
creates scrollbars for navigation.
</p>
<p>Left clicking in the video zooms in.<br>
Ctrl clicking in the video zooms out.<br>
Rotating the wheel on a wheel mouse zooms in and out.
</p>
<hr>
<a name="Masks-tool"></a>
<a name="Masks-tool-1"></a>
<h3 class="subsection">8.1.3 Masks tool</h3>
<a name="index-Masks-tool"></a>

<p>This tool <img src="manual_images_intl/mask.png" alt="manual_images_intl/mask"> brings up the mask editing tool See section <a href="#Masks">Masks</a>.
Enable the <img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> tool window to see options
for this tool.
</p>
<hr>
<a name="Camera"></a>
<a name="Camera-1"></a>
<h3 class="subsection">8.1.4 Camera</h3>
<a name="index-Camera"></a>

<p>This tool <img src="manual_images_intl/camera.png" alt="manual_images_intl/camera"> brings up the camera editing tool
See section <a href="#The-camera-and-projector">The camera and projector</a>.  Enable the
<img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> tool window to see options for this
tool.
</p>
<hr>
<a name="Projector"></a>
<a name="Projector-1"></a>
<h3 class="subsection">8.1.5 Projector</h3>
<a name="index-Projector"></a>

<p>This tool <img src="manual_images_intl/projector.png" alt="manual_images_intl/projector"> brings up the projector
editing tool See section <a href="#The-camera-and-projector">The camera and projector</a>.  Enable the
<img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> tool window to see options for this
tool.
</p>
<hr>
<a name="Crop-tool"></a>
<a name="Crop-tool-1"></a>
<h3 class="subsection">8.1.6 Crop tool</h3>
<a name="index-Crop-tool"></a>

<p>This tool <img src="manual_images_intl/crop.png" alt="manual_images_intl/crop"> brings up the cropping tool
See section <a href="#Cropping">Cropping</a>.  The <img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> tool window must
be enabled to use this tool.
</p>
<hr>
<a name="Eyedropper"></a>
<a name="Eyedropper-1"></a>
<h3 class="subsection">8.1.7 Eyedropper</h3>
<a name="index-Eyedropper"></a>

<p>This brings up the eyedropper.  The eyedropper detects whatever color is under
it and stores it in a temporary area.  Enabling the
<img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> tool info shows the currently selected color.
Click anywhere in the video output to select the color at that point.<br>
The eyedropper not only lets you see areas which are clipped, but its value can
be applied to many effects.  Different effects handle the eyedropper
differently.
</p>
<hr>
<a name="Tool-info"></a>
<a name="Tool-info-1"></a>
<h3 class="subsection">8.1.8 Tool info</h3>
<a name="index-Tool-info"></a>

<p>This tool <img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> button works only in
conjunction with the other controls on the compositor.  Based on what
compositing control is active the toggle button will activate/deactivate the
appropriate control dialog box.
</p>
<p>Controls with dialog boxes are:
</p><ul>
<li> Edit mask
</li><li> Camera automation
</li><li> Projector automation
</li><li> Crop control
</li></ul>

<hr>
<a name="Safe-regions-tool"></a>
<a name="Safe-regions-tool-1"></a>
<h3 class="subsection">8.1.9 Safe regions tool</h3>
<a name="index-Safe-regions-tool"></a>

<p>This tool <img src="manual_images_intl/titlesafe.png" alt="manual_images_intl/titlesafe"> draws the safe regions in the video
output.  This does not affect the rendered output See section <a href="#Safe-regions">Safe regions</a>.
</p>
<hr>
<a name="Compositing"></a>
<a name="Compositing-1"></a>
<h2 class="section">8.2 Compositing</h2>
<a name="index-Compositing"></a>

<p>A large amount of Cinelerra&rsquo;s binary size is directed towards compositing.
When you remove the letterboxing from a widescreen show, you are compositing.
Changing the resolution of a show, making a split screen, and fading in and out
among other things are all compositing operations in Cinelerra.  Cinelerra
detects when it is in a compositing operation and plays back through the
compositing engine only then.  Otherwise, it uses the fastest decoder available
in the hardware.
</p>
<p>Compositing operations are done on the timeline and in the Compositor window.
Shortcuts exist in the Resource window for changing some compositing
attributes.  Once some video files are on the timeline, the compositor window
is a good place to try compositing.
</p>

<hr>
<a name="The-camera-and-projector"></a>
<a name="The-camera-and-projector-1"></a>
<h3 class="subsection">8.2.1 The camera and projector</h3>
<a name="index-Camera-1"></a>
<a name="index-Projector-1"></a>


<hr>
<a name="The-temporary"></a>
<a name="The-temporary-1"></a>
<h4 class="subsubsection">8.2.1.1 The temporary</h4>
<a name="index-Temporary"></a>

<p>In the compositor window, the most important functions are the
<img src="manual_images_intl/camera.png" alt="manual_images_intl/camera"> camera button and the
<img src="manual_images_intl/projector.png" alt="manual_images_intl/projector"> projector button.  These control
operation of the camera and projector.  Cinelerra&rsquo;s compositing routines use a
&quot;temporary&quot;, a frame of video in memory where all graphics processing is
performed.  Inside Cinelerra&rsquo;s compositing pipeline, the camera determines where
in the source video the &quot;temporary&quot; is copied from.  The projector determines
where in the output the &quot;temporary&quot; is copied to.
</p>
<img src="manual_images_en/temporary_explained.png" alt="manual_images_en/temporary_explained">

<p>The process is pretty much as if we scanned in a roll of film one frame at a
time, then (using Gimp, for example) digitally altered the scanned image with
various filters.  Once the image has been transformed by the filters (color
correction, for example) we then project the finished image back into a new
roll of film, thus creating a new &quot;modified&quot; version of the original.
</p>
<p>Each track has a different &quot;temporary&quot; which is defined by the track size.  By
resizing the tracks you can create split screens, pans, and zooms.
</p>
<img src="manual_images_en/compositing_pipeline.png" alt="manual_images_en/compositing_pipeline">
<p align="center"><b>Visual representation of the compositing pipeline</b>
</p>
<p>When editing the camera and projector in the compositing window, the first
track with <b>record</b> enabled is the track affected.  Even if the track is
completely transparent, it is still the affected track.  If multiple video
tracks exist, the easiest way to select one track for editing is to
<b>SHIFT-click</b> on the record icon of the track.  This solos the track.
</p>
<img src="manual_images_en/projector_concept.png" alt="manual_images_en/projector_concept">

<p>The purpose of the projector is to place the contents of the &quot;temporary&quot; into the
project&rsquo;s output.  The intent of the projector is to composite several
sources from the various tracks into one final output track.
</p>
<p>The projector alignment frame is identical to the camera&rsquo;s viewport, except
that it guides where on the output canvas to put the contents of each
temporary.
</p>
<img src="manual_images_intl/projector_screen.png" alt="manual_images_intl/projector_screen">

<hr>
<a name="Compositing-projector-controls"></a>
<a name="Compositing-projector-controls-1"></a>
<h4 class="subsubsection">8.2.1.2 Compositing projector controls</h4>
<a name="index-Compositing-projector-controls"></a>
<a name="index-Projector-controls_002c-compositing"></a>

<p>When the <b>projector</b> button is enabled in the compositor window, you are in
projector editing mode.  A guide box appears in the video window.  Dragging
anywhere in the video window causes the guide box to move, hopefully along with
the video.  <b>SHIFT-dragging</b> anywhere in the video window causes the guide
box to shrink and grow along with the video.  Once you have positioned the
video with the projector, you are ready to master the camera.
</p>
<hr>
<a name="Compositing-camera-controls"></a>
<a name="Compositing-camera-controls-1"></a>
<h4 class="subsubsection">8.2.1.3 Compositing camera controls</h4>
<a name="index-Compositing-camera-controls"></a>
<a name="index-Camera-controls_002c-compositing"></a>

<p>Select the <img src="manual_images_intl/camera.png" alt="manual_images_intl/camera"> camera button to enable camera
editing mode.  In this mode, the guide box shows where the camera position is
in relation to past and future camera positions but not where it is in relation
to the source video.  Dragging the camera box in the compositor window does not
move the box but instead moves the location of the video inside the box.
</p>
<a name="index-Viewport"></a>
<p>The <b>viewport</b> is a window on the camera that frames the area of source video
to be scanned.  The viewport is represented as a red frame with diagonal cross
bars.
</p>
<img src="manual_images_en/camera_concept.png" alt="manual_images_en/camera_concept">
<p align="center"><b>The viewport</b>
</p>
<img src="manual_images_en/viewport_sizes.png" alt="manual_images_en/viewport_sizes">
<p align="center"><b>Viewport sizes</b>
</p>
<p>The size of the viewport is defined by the size of the current track.  A
smaller viewport (640x400) captures a smaller area.  A larger viewport
(800x200) captures an area larger than the source video and fills the empty
spaces with blanks.
</p>
<p>Once we have our viewport defined, we still need to place the camera right
above the area of source video we are interested on.  To control the location
of the camera:
</p><ol>
<li> Open the compositor window with a track selected.
</li><li> Select the camera button to enable camera editing mode.
</li><li> Drag over the display window.
</li></ol>

<p>When we drag over the viewport in the compositor window (although initially
counter-intuitive), the viewport does not moves but the area of video that sits
under the camera&rsquo;s location does, like when watching the output of a moving camera.
</p>
<img src="manual_images_intl/viewport_drag.png" alt="manual_images_intl/viewport_drag">
<p align="center"><b>In the compositor window, the viewport is always</b>
</p><p align="center"><b>shown centered, what moves is the video under it</b>
</p>
<p>For example, when you drag the camera down, the viewport in effect is moving
downwards on the video, showing its path towards the bottom of the video, but
from our perspective on the compositor screen, we see the video moving up.
When you drag the camera right, the video seems to move left, and so on.
</p>
<p><b>Note:</b> The guide box shows where the camera position is in relation to past
and future camera positions, not where it is in relation to the source video.
</p>
<hr>
<a name="Popup-menu-of-options"></a>
<a name="Popup-menu-of-options-1"></a>
<h4 class="subsubsection">8.2.1.4 Popup menu of options</h4>
<a name="index-Popup-menu-of-options"></a>
<a name="index-Options_002c-popup-menu-of"></a>

<p>In the compositing window, there is a popup menu of options for the camera and
projector.  Right click over the video portion of the compositing window to
bring up the menu.
</p>
<ul>
<li> Reset Camera causes the camera to return to the center position.
</li><li> Reset Projector causes the projector to return to the center.
</li></ul>

<hr>
<a name="The-camera-and-projector-tool-window"></a>
<a name="The-camera-and-projector-tool-window-1"></a>
<h4 class="subsubsection">8.2.1.5 The camera and projector tool window</h4>
<a name="index-The-camera-and-projector-tool-window"></a>

<p>The camera and projector have shortcut operations that do not appear in the 
popup menu and are not represented in video overlays.  These are accessed in the 
<b>Tool window</b>.
Most operations in the Compositor window have a tool window which is enabled by
activating the <img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> question mark.
</p>
<img src="manual_images_intl/compositor_campro_tool.png" alt="manual_images_intl/compositor_campro_tool">
<p align="center"><b>The camera and projector tool window</b>
</p>
<p>In the case of the camera and projector, the tool window shows x, y, and z
coordinates.  By either tumbling or entering text directly, the camera and
projector can be precisely positioned.  9 justification types are also defined
for easy access.  A popular justification operation is upper left projection
after image reduction.  This is used when reducing the size of video with
aspect ratio adjustment.
</p>
<ul>
<li> <img src="manual_images_intl/button_justify_left.png" alt="manual_images_intl/button_justify_left"> Left
</li><li> <img src="manual_images_intl/button_justify_centerH.png" alt="manual_images_intl/button_justify_centerH"> Center Horizontal
</li><li> <img src="manual_images_intl/button_justify_right.png" alt="manual_images_intl/button_justify_right"> Right
</li><li> <img src="manual_images_intl/button_justify_top.png" alt="manual_images_intl/button_justify_top"> Top
</li><li> <img src="manual_images_intl/button_justify_centerV.png" alt="manual_images_intl/button_justify_centerV"> Center Vertical
</li><li> <img src="manual_images_intl/button_justify_bottom.png" alt="manual_images_intl/button_justify_bottom"> Bottom
</li></ul>

<p>The translation effect allows simultaneous aspect ratio conversion and
reduction but is easier to use if the reduced video is put in the upper left of
the temporary instead of in the center.  The track size is set to the original
size of the video and the camera is centered.  The output size is set to the
reduced size of the video.  Without any effects, this produces just the cropped
center portion of the video in the output.
</p>
<p>The translation effect is dropped onto the video track.  The input dimensions
of the translation effect are set to the original size and the output
dimensions are set to the reduced size.  To put the reduced video in the center
subsection that the projector shows would require offsetting <b>out x and out y</b>
by a complicated calculation.  Instead, we leave <b>out x and out y</b> at 0 and
use the projector&rsquo;s tool window.
</p>
<p>Merely by selecting <img src="manual_images_intl/left_justify.png" alt="manual_images_intl/left_justify"> left justify and
<img src="manual_images_intl/top_justify.png" alt="manual_images_intl/top_justify"> top justify, the projector displays the reduced
image from the top left corner of the temporary in the center of the output.
</p>
<hr>
<a name="Masks"></a>
<a name="Masks-1"></a>
<h3 class="subsection">8.2.2 Masks</h3>
<a name="index-Masks"></a>

<p>Masks select a region of the video for either displaying or hiding.  Masks are
also used in conjunction with another effect to isolate the effect to a certain
region of the frame.  A copy of one video track may be delayed slightly and
unmasked in locations where the one copy has interference but the other copy
does not.  Color correction may be needed in one subsection of a frame but not
another.  A mask can be applied to just a subsection of the color corrected track
while the vanilla track shows through.  Removal of boom microphones, airplanes,
and housewives are other mask uses.
</p>
<p>The order of the compositing pipeline affects what can be done with masks.
Mainly, masks are performed on the temporary after effects and before the
projector.  This means multiple tracks can be bounced to a masked track and
projected with the same mask.
</p>
<p>Our compositing pipeline graph now has a masking stage.  There are 8 possible
masks per track.  Each mask is defined separately, although they each perform
the same operation, whether it is multiplication or subtraction.
</p>
<img src="manual_images_en/compositing_pipeline2.png" alt="manual_images_en/compositing_pipeline2">
<p align="center"><b>Compositing pipeline with masks</b>
</p>
<p>To define a mask, go into the Compositor window and enable the
<img src="manual_images_intl/mask.png" alt="manual_images_intl/mask"> <b>mask</b> toggle.  Now go over the video and click-drag.
</p>
<p><b>IMPORTANT:</b> You have to select <b>automatic keyframes</b> (See section <a href="cinelerra_cv_manual_en_18.html#Automatic-keyframes">Automatic keyframes</a>,) if you wish to move a mask over time.  If you do not select
<b>automatic keyframes</b>, the mask position will be the same even if you edit at
different places on the timeline.
</p>
<img src="manual_images_intl/compositor_mask1.png" alt="manual_images_intl/compositor_mask1">

<p>Click-drag again in another part of the image to create each new point of the
mask.  While it is not the conventional Bezier curve behavior, this masking
interface performs in realtime what the effect of the mask is going to be.
Creating each point of the mask expands a rubber band curve.
</p>
<p>Once points are defined, they can be moved by <b>CTRL-dragging</b> in the vicinity
of the corner.
</p>
<img src="manual_images_en/compositor_mask_drag.png" alt="manual_images_en/compositor_mask_drag">
<p align="center"><b>CTRL-drag allows you to move existing points to</b>
</p><p align="center"><b>new locations, thus altering the shape of the mask</b>
</p>
<p>This, however, does not smooth out the curve.  The in-out points of the Bezier
curve are accessed by <b>SHIFT-dragging</b> in the vicinity of the corner.  Then
<b>SHIFT-dragging</b> near the in or out point causes the point to move.
</p>
<img src="manual_images_en/compositor_mask_bezier.png" alt="manual_images_en/compositor_mask_bezier">
<p align="center"><b>SHIFT-drag activates belzier handles</b>
</p>
<p align="center"><b>to create curves between mask points</b>
</p>
<p>Finally, once you have a mask, the mask can be translated in one piece by
<b>CTRL-ALT-dragging</b> the mask.  Mask editing in Cinelerra is identical to how
The Gimp edits masks except in this case the effect of the mask is always on.
</p>
<img src="manual_images_en/compositor_mask_translate.png" alt="manual_images_en/compositor_mask_translate">
<p align="center"><b>CTRL-ALT-drag translates an entire mask</b>
</p><p align="center"><b>to a new location on the screen</b>
</p>
<p>The masks have many more parameters which could not be represented with video
overlays.  These are represented in the tool window for masks.  Selecting the
<img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> question mark when the
<img src="manual_images_intl/mask.png" alt="manual_images_intl/mask"> mask toggle is highlighted brings up the mask options.
</p>
<img src="manual_images_intl/mask_dialog.png" alt="manual_images_intl/mask_dialog">
<p align="center"><b>Mask options window</b>
</p>
<p>The <b>mode</b> of the mask determines if the mask removes data or makes data
visible.  In subtraction mode, the mask causes video to disappear.  In multiplication mode,
the mask causes video to appear and everything outside the mask to disappear.
</p>
<img src="manual_images_en/compositor_mask_mode.png" alt="manual_images_en/compositor_mask_mode">
<p align="center"><b>Mask mode</b>
</p>
<p>The <b>value</b> of the mask determines how extreme the multiplication or subtraction
is.  In subtraction mode, higher values subtract more alpha.  In multiplication mode,
higher values make the region in the mask brighter while the region outside the mask
is always hidden.
</p>
<img src="manual_images_en/composite_mask_value.png" alt="manual_images_en/composite_mask_value">
<p align="center"><b>Mask value</b>
</p>
<p>The mask number determines which one of the 8 possible masks we are editing.
Each track has 8 possible masks.  When you click-drag in the compositor window,
you are only editing one of the masks.  Change the value of <b>mask number</b> to
cause another mask to be edited.  The previous mask is still active but only
the curve overlay for the currently selected mask is visible.
</p>
<p>When multiple masks are used, their effects are ORed together.  Every mask in a
single track uses the same value and mode.
</p>
<a name="index-Feather-mask"></a>
<a name="index-Mask_002c-feather"></a>
<p>The edges of a mask are hard by default but this rarely is desired.  The
<b>feather</b> parameter determines how many pixels to feather the mask.  This
creates softer edges but takes longer to render.
</p>
<img src="manual_images_en/compositor_feather.png" alt="manual_images_en/compositor_feather">
<p align="center"><b>Feather parameter</b>
</p>
<p>Note: The OpenGL mask renderer is of low quality and only suitable as a preview for 
initial work. For fine-tuning of masks (with large feather values) OpenGL should 
be switched off and the software renderer be used.
</p>
<p>Finally, there are parameters which affect one point on the current mask
instead of the whole mask.  These are <b>Delete, x, y</b>.  The active point is
defined as the last point dragged in the compositor window.  Any point can be
activated merely by <b>CTRL-clicking</b> near it without moving the pointer.  Once
a point is activated, <b>Delete</b> deletes it and <b>x, y</b> allow repositioning by
numeric entry.
</p>
<hr>
<a name="Cropping"></a>
<a name="Cropping-1"></a>
<h3 class="subsection">8.2.3 Cropping</h3>
<a name="index-Cropping"></a>

<p>Cropping reduces the visible picture area of the whole project.<br>
It changes the values of the output dimensions (width and height in pixels) 
and the X Y values of the projector in a single operation. <br>
Since it changes project settings it affects all the tracks for their
entire duration and it is not keyframable.
</p>
<p>Enable the <img src="manual_images_intl/crop.png" alt="manual_images_intl/crop"> crop toggle and the 
<img src="manual_images_intl/toolwindow.png" alt="manual_images_intl/toolwindow"> tool window in the <b>compositor
window</b> to display the <b>Crop control dialog box</b>.
</p>
<img src="manual_images_intl/compositor_crop_tool.png" alt="manual_images_intl/compositor_crop_tool">
<p align="center"><b>Crop control dialog box</b>
</p>
<p>Click-drag anywhere in the video to define the crop area.  This draws a
rectangle over the video. <br>
</p>
<img src="manual_images_intl/compositor_crop.png" alt="manual_images_intl/compositor_crop">
<p align="center"><b>Crop area defined</b>
</p>
<p>Click-drag anywhere in the video to start a new rectangle.  <br>
Click-drag over any corner of the rectangle to reposition the corner.<br>
ALT-click in the cropping rectangle to translate the rectangle to any
position without resizing it.<br>
The crop control dialog allows also text entry of the top left coordinates
(X1,Y1) and bottom right coordinates (X2,Y2) that define the crop
rectangle.
</p>
<p>When the rectangle is positioned, hit the <b>Do it</b> button in the crop control 
dialog to execute the cropping operation: the portion of the image outside
the rectangle will be cut off and the projector will make the output fit the
canvas.<br>
The <b>Set Format</b> window will show the new project Width and Height values.<br>
The projector tool window will show the new X Y values.<br>
Track size will remain unchanged.<br>
To undo the cropping enter the original project dimensions in the <b>Set Format</b>
window and click on <b>Reset projector</b> in the popup menu of the compositor.
</p>
<hr>
<a name="Safe-regions"></a>
<a name="Safe-regions-1"></a>
<h3 class="subsection">8.2.4 Safe regions</h3>
<a name="index-Safe-regions"></a>
<a name="index-Regions_002c-safe"></a>

<p>On consumer displays the borders of the image are cut off and within the
cut-off point is a region which is not always square like it is in the
compositor window.  The borders are intended for scratch room and vertical
blanking data.  You can show where these borders are by enabling the
<img src="manual_images_intl/titlesafe.png" alt="manual_images_intl/titlesafe"> safe regions toggle.  Keep titles inside the inner
rectangle and keep action inside the outer rectangle.
</p>
<hr>
<a name="Overlay-modes"></a>
<a name="Overlay-modes-1"></a>
<h3 class="subsection">8.2.5 Overlay modes</h3>
<a name="index-Overlay-modes"></a>

<p>Every video track has an overlay mode, accessible by expanding the track.  The
overlay mode is a pull-down menu on the left under the fader.  When collapsed,
it displays an icon representing the current overlay mode.
</p>
<p>Select the <img src="manual_images_intl/expandpatch_checked.png" alt="manual_images_intl/expandpatch_checked"> expand track toggle to view all
the options for a video track if you can not see the overlay mode.  The overlay
mode of video tracks is <b>normal</b> by default.  Select other modes by clicking
the overlay button and selecting an item from the popup menu.
</p>
<p>Overlay modes are processed inside the projector stage of compositing.  The
different modes are summarized below.
</p>
<a name="index-Normal-overlay-mode"></a>
<ul>
<li> <b>Normal</b><br>
This mode uses a traditional Porter-Diff equation to blend tracks with alpha.
When no alpha exists in the project color model, the new track always replaces
the output.

<a name="index-Addition-overlay-mode"></a>
</li><li> <b>Addition</b><br>
In this mode, whatever is in the output is added to the current track.
The result is blended based on the current track&rsquo;s alpha onto the output.

<a name="index-Subtraction-overlay-mode"></a>
</li><li> <b>Subtraction</b><br>
In this mode, the current track is subtracted from the output and the
result is alpha blended onto the output.

<a name="index-Multiply-overlay-mode"></a>
</li><li> <b>Multiply</b><br>
This is the most useful operation.  The current track is multiplied by the
output and the result blended onto the output.  Usually a black and white image
with no alpha channel or a white title on a black image is used as the current
track.  With the multiply operation, only the output portions under the white
area show.

<a name="index-Divide-overlay-mode"></a>
</li><li> <b>Divide</b><br>
This mode divides the current track by the output and the result is
blended into the output.  It usually results in overloaded levels.

<a name="index-Replace-overlay-mode"></a>
</li><li> <b>Replace</b><br>
This mode does no blending and overwrites the output with the current
track.
</li></ul>

<hr>
<a name="Track-and-output-sizes"></a>
<a name="Track-and-output-sizes-1"></a>
<h3 class="subsection">8.2.6 Track and output sizes</h3>
<a name="index-Track-and-output-sizes"></a>
<a name="index-Sizes_002c-track-and-output"></a>


<p>The size of the temporary and the size of the output in our compositing
pipeline are independent and variable.  This fits into everything covered so
far.  The camera&rsquo;s viewport is the temporary size.  Effects are processed in
the temporary and are affected by the temporary size.  Projectors are rendered
to the output and are affected by the output size.  If the temporary is smaller
than the output, the temporary is bordered by blank regions in the output.  If
the temporary is bigger than the output, the temporary is cropped.
</p>
<hr>
<a name="Track-size"></a>
<a name="Track-size-1"></a>
<h4 class="subsubsection">8.2.6.1 Track size</h4>
<a name="index-Track-size"></a>
<a name="index-Size_002c-track"></a>

<p>The temporary size is defined as the track size.  Each track has a different
size.  Right click on a track to bring up the track&rsquo;s menu.  Select <b>Resize
Track</b> to resize the track to any arbitrary size.  Alternatively you can select
<b>Match output size</b> to make the track the same size as the output.
</p>
<img src="manual_images_intl/resize_track.png" alt="manual_images_intl/resize_track">
<p align="center"><b>The resize track window</b>
</p>
<p>For example, the next image shows how a video track and a project output of
equal sizes look when displayed on the compositor.
</p>
<img src="manual_images_intl/compositor_output_equal.png" alt="manual_images_intl/compositor_output_equal">
<p align="center"><b>Project output size and video</b>
</p><p align="center"><b>track with equal dimensions (720x480)</b>
</p>
<p>If you resize a track, then its appearance on the compositor changes
accordingly.
</p>
<p>Reducing the track (to 640 x 400) and leaving the project&rsquo;s output size
untouched makes the track show on the compositor smaller and framed by a blank
area.
</p>
<img src="manual_images_intl/compositor_output_small.png" alt="manual_images_intl/compositor_output_small">
<p align="center"><b>New track (640x400), smaller</b>
</p><p align="center"><b>than the project&rsquo;s output (720x480)</b>
</p>
<p>Enlarging the track (to 800 x 560) and leaving the project&rsquo;s output size
untouched makes the track show on the compositor larger and cropped to the
output&rsquo;s dimension.
</p>
<img src="manual_images_intl/compositor_output_large.png" alt="manual_images_intl/compositor_output_large">
<p align="center"><b>New track (800x560), cropped to</b>
</p><p align="center"><b>the project&rsquo;s output size (720x480)</b>
</p>
<p>Using this relationship between the track and the project&rsquo;s output size you can
effectively reduce or magnify the size of a particular track with regards to
the final output and therefore create visual &quot;effects&quot; like split screens,
pans, and zooms on the compositor.
</p>
<hr>
<a name="Output-size"></a>
<a name="Output-size-1"></a>
<h4 class="subsubsection">8.2.6.2 Output size</h4>
<a name="index-Output-size"></a>
<a name="index-Size_002c-output"></a>

<p>The output size is set in either <b>New</b> when creating a new project or
<b>Settings-&gt;Format</b>.  In the Resource window there is another way to change
the output size.  Right click on a video asset and select <b>Match project
size</b> to conform the output to the asset.  When new tracks are created, the
track size always conforms to the output size specified by these methods.
</p>
<p>When rendering, the project&rsquo;s output size is the final video track size where
the temporary pipeline is rendered into.
</p>
<p>If the output size is larger than the temporary then the image transferred from
the temporary will fit inside the Output Track.  Any space left on the Output
is left blank.
</p>
<img src="manual_images_intl/output_small.png" alt="manual_images_intl/output_small">
<p align="center"><b>Output size (shown in green) larger than the temporary</b>
</p>
<p>If the output size is smaller than the temporary then some of the temporary
video will be cropped out.
</p>
<img src="manual_images_intl/output_large.png" alt="manual_images_intl/output_large">
<p align="center"><b>Output size too small for the temporary</b>
</p>
<hr>
<table class="header" cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Compositor-window" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_9.html#Viewer-window" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[Index]</td>
<td valign="middle" align="left">[<a href="cinelerra_cv_manual_en_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated on <i>May 12, 2015</i> using <a href="http://www.nongnu.org/texi2html/"><i>texi2html 5.0</i></a>.
 </font>
 <br>

</p>
</body>
</html>
